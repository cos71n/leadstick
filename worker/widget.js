!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).LeadStick={})}(this,function(e){"use strict";var t,n,o,r,i,l,s,a,c,u,d,_=Object.defineProperty,p=(e,t,n)=>((e,t,n)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),f={},h=[],m=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,g=Array.isArray;function y(e,t){for(var n in t)e[n]=t[n];return e}function v(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function b(e,n,o){var r,i,l,s={};for(l in n)"key"==l?r=n[l]:"ref"==l?i=n[l]:s[l]=n[l];if(arguments.length>2&&(s.children=arguments.length>3?t.call(arguments,2):o),"function"==typeof e&&null!=e.defaultProps)for(l in e.defaultProps)void 0===s[l]&&(s[l]=e.defaultProps[l]);return x(e,s,r,i,null)}function x(e,t,r,i,l){var s={type:e,props:t,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==l?++o:l,__i:-1,__u:0};return null==l&&null!=n.vnode&&n.vnode(s),s}function w(e){return e.children}function k(e,t){this.props=e,this.context=t}function C(e,t){if(null==t)return e.__?C(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?C(e):null}function S(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return S(e)}}function I(e){(!e.__d&&(e.__d=!0)&&r.push(e)&&!T.__r++||i!=n.debounceRendering)&&((i=n.debounceRendering)||l)(T)}function T(){for(var e,t,o,i,l,a,c,u=1;r.length;)r.length>u&&r.sort(s),e=r.shift(),u=r.length,e.__d&&(o=void 0,l=(i=(t=e).__v).__e,a=[],c=[],t.__P&&((o=y({},i)).__v=i.__v+1,n.vnode&&n.vnode(o),L(t.__P,o,i,t.__n,t.__P.namespaceURI,32&i.__u?[l]:null,a,null==l?C(i):l,!!(32&i.__u),c),o.__v=i.__v,o.__.__k[o.__i]=o,W(a,o,c),o.__e!=l&&S(o)));T.__r=0}function N(e,t,n,o,r,i,l,s,a,c,u){var d,_,p,m,y,v,b=o&&o.__k||h,k=t.length;for(a=function(e,t,n,o,r){var i,l,s,a,c,u=n.length,d=u,_=0;for(e.__k=new Array(r),i=0;i<r;i++)null!=(l=t[i])&&"boolean"!=typeof l&&"function"!=typeof l?(a=i+_,(l=e.__k[i]="string"==typeof l||"number"==typeof l||"bigint"==typeof l||l.constructor==String?x(null,l,null,null,null):g(l)?x(w,{children:l},null,null,null):null==l.constructor&&l.__b>0?x(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=e,l.__b=e.__b+1,s=null,-1!=(c=l.__i=M(l,n,a,d))&&(d--,(s=n[c])&&(s.__u|=2)),null==s||null==s.__v?(-1==c&&(r>u?_--:r<u&&_++),"function"!=typeof l.type&&(l.__u|=4)):c!=a&&(c==a-1?_--:c==a+1?_++:(c>a?_--:_++,l.__u|=4))):e.__k[i]=null;if(d)for(i=0;i<u;i++)null!=(s=n[i])&&!(2&s.__u)&&(s.__e==o&&(o=C(s)),U(s,s));return o}(n,t,b,a,k),d=0;d<k;d++)null!=(p=n.__k[d])&&(_=-1==p.__i?f:b[p.__i]||f,p.__i=d,v=L(e,p,_,r,i,l,s,a,c,u),m=p.__e,p.ref&&_.ref!=p.ref&&(_.ref&&H(_.ref,null,p),u.push(p.ref,p.__c||m,p)),null==y&&null!=m&&(y=m),4&p.__u||_.__k===p.__k?a=P(p,a,e):"function"==typeof p.type&&void 0!==v?a=v:m&&(a=m.nextSibling),p.__u&=-7);return n.__e=y,a}function P(e,t,n){var o,r;if("function"==typeof e.type){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=P(o[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=C(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function E(e,t){return t=t||[],null==e||"boolean"==typeof e||(g(e)?e.some(function(e){E(e,t)}):t.push(e)),t}function M(e,t,n,o){var r,i,l=e.key,s=e.type,a=t[n];if(null===a&&null==e.key||a&&l==a.key&&s==a.type&&!(2&a.__u))return n;if(o>(null==a||2&a.__u?0:1))for(r=n-1,i=n+1;r>=0||i<t.length;){if(r>=0){if((a=t[r])&&!(2&a.__u)&&l==a.key&&s==a.type)return r;r--}if(i<t.length){if((a=t[i])&&!(2&a.__u)&&l==a.key&&s==a.type)return i;i++}}return-1}function O(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||m.test(t)?n:n+"px"}function D(e,t,n,o,r){var i,l;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||O(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||O(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])i=t!=(t=t.replace(a,"$1")),l=t.toLowerCase(),t=l in e||"onFocusOut"==t||"onFocusIn"==t?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o?n.u=o.u:(n.u=c,e.addEventListener(t,i?d:u,i)):e.removeEventListener(t,i?d:u,i);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(s){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function A(e){return function(t){if(this.l){var o=this.l[t.type+e];if(null==t.t)t.t=c++;else if(t.t<o.u)return;return o(n.event?n.event(t):t)}}}function L(e,o,r,i,l,s,a,c,u,d){var _,p,h,m,b,x,S,I,T,P,E,M,O,A,L,W,H,U=o.type;if(null!=o.constructor)return null;128&r.__u&&(u=!!(32&r.__u),s=[c=o.__e=r.__e]),(_=n.__b)&&_(o);e:if("function"==typeof U)try{if(I=o.props,T="prototype"in U&&U.prototype.render,P=(_=U.contextType)&&i[_.__c],E=_?P?P.props.value:_.__:i,r.__c?S=(p=o.__c=r.__c).__=p.__E:(T?o.__c=p=new U(I,E):(o.__c=p=new k(I,E),p.constructor=U,p.render=j),P&&P.sub(p),p.props=I,p.state||(p.state={}),p.context=E,p.__n=i,h=p.__d=!0,p.__h=[],p._sb=[]),T&&null==p.__s&&(p.__s=p.state),T&&null!=U.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=y({},p.__s)),y(p.__s,U.getDerivedStateFromProps(I,p.__s))),m=p.props,b=p.state,p.__v=o,h)T&&null==U.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),T&&null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(T&&null==U.getDerivedStateFromProps&&I!==m&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(I,E),!p.__e&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(I,p.__s,E)||o.__v==r.__v){for(o.__v!=r.__v&&(p.props=I,p.state=p.__s,p.__d=!1),o.__e=r.__e,o.__k=r.__k,o.__k.some(function(e){e&&(e.__=o)}),M=0;M<p._sb.length;M++)p.__h.push(p._sb[M]);p._sb=[],p.__h.length&&a.push(p);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(I,p.__s,E),T&&null!=p.componentDidUpdate&&p.__h.push(function(){p.componentDidUpdate(m,b,x)})}if(p.context=E,p.props=I,p.__P=e,p.__e=!1,O=n.__r,A=0,T){for(p.state=p.__s,p.__d=!1,O&&O(o),_=p.render(p.props,p.state,p.context),L=0;L<p._sb.length;L++)p.__h.push(p._sb[L]);p._sb=[]}else do{p.__d=!1,O&&O(o),_=p.render(p.props,p.state,p.context),p.state=p.__s}while(p.__d&&++A<25);p.state=p.__s,null!=p.getChildContext&&(i=y(y({},i),p.getChildContext())),T&&!h&&null!=p.getSnapshotBeforeUpdate&&(x=p.getSnapshotBeforeUpdate(m,b)),W=_,null!=_&&_.type===w&&null==_.key&&(W=q(_.props.children)),c=N(e,g(W)?W:[W],o,r,i,l,s,a,c,u,d),p.base=o.__e,o.__u&=-161,p.__h.length&&a.push(p),S&&(p.__E=p.__=null)}catch(z){if(o.__v=null,u||null!=s)if(z.then){for(o.__u|=u?160:128;c&&8==c.nodeType&&c.nextSibling;)c=c.nextSibling;s[s.indexOf(c)]=null,o.__e=c}else for(H=s.length;H--;)v(s[H]);else o.__e=r.__e,o.__k=r.__k;n.__e(z,o,r)}else null==s&&o.__v==r.__v?(o.__k=r.__k,o.__e=r.__e):c=o.__e=function(e,o,r,i,l,s,a,c,u){var d,_,p,h,m,y,b,x=r.props,w=o.props,k=o.type;if("svg"==k?l="http://www.w3.org/2000/svg":"math"==k?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),null!=s)for(d=0;d<s.length;d++)if((m=s[d])&&"setAttribute"in m==!!k&&(k?m.localName==k:3==m.nodeType)){e=m,s[d]=null;break}if(null==e){if(null==k)return document.createTextNode(w);e=document.createElementNS(l,k,w.is&&w),c&&(n.__m&&n.__m(o,s),c=!1),s=null}if(null==k)x===w||c&&e.data==w||(e.data=w);else{if(s=s&&t.call(e.childNodes),x=r.props||f,!c&&null!=s)for(x={},d=0;d<e.attributes.length;d++)x[(m=e.attributes[d]).name]=m.value;for(d in x)if(m=x[d],"children"==d);else if("dangerouslySetInnerHTML"==d)p=m;else if(!(d in w)){if("value"==d&&"defaultValue"in w||"checked"==d&&"defaultChecked"in w)continue;D(e,d,null,m,l)}for(d in w)m=w[d],"children"==d?h=m:"dangerouslySetInnerHTML"==d?_=m:"value"==d?y=m:"checked"==d?b=m:c&&"function"!=typeof m||x[d]===m||D(e,d,m,x[d],l);if(_)c||p&&(_.__html==p.__html||_.__html==e.innerHTML)||(e.innerHTML=_.__html),o.__k=[];else if(p&&(e.innerHTML=""),N("template"==o.type?e.content:e,g(h)?h:[h],o,r,i,"foreignObject"==k?"http://www.w3.org/1999/xhtml":l,s,a,s?s[0]:r.__k&&C(r,0),c,u),null!=s)for(d=s.length;d--;)v(s[d]);c||(d="value","progress"==k&&null==y?e.removeAttribute("value"):null!=y&&(y!==e[d]||"progress"==k&&!y||"option"==k&&y!=x[d])&&D(e,d,y,x[d],l),d="checked",null!=b&&b!=e[d]&&D(e,d,b,x[d],l))}return e}(r.__e,o,r,i,l,s,a,u,d);return(_=n.diffed)&&_(o),128&o.__u?void 0:c}function W(e,t,o){for(var r=0;r<o.length;r++)H(o[r],o[++r],o[++r]);n.__c&&n.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(o){n.__e(o,t.__v)}})}function q(e){return"object"!=typeof e||null==e||e.__b&&e.__b>0?e:g(e)?e.map(q):y({},e)}function H(e,t,o){try{if("function"==typeof e){var r="function"==typeof e.__u;r&&e.__u(),r&&null==t||(e.__u=e(t))}else e.current=t}catch(i){n.__e(i,o)}}function U(e,t,o){var r,i;if(n.unmount&&n.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||H(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(l){n.__e(l,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&U(r[i],t,o||"function"!=typeof e.type);o||v(e.__e),e.__c=e.__=e.__e=void 0}function j(e,t,n){return this.constructor(e,n)}t=h.slice,n={__e:function(e,t,n,o){for(var r,i,l;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(e)),l=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,o||{}),l=r.__d),l)return r.__E=r}catch(s){e=s}throw e}},o=0,k.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=y({},this.state),"function"==typeof e&&(e=e(y({},n),this.props)),e&&y(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),I(this))},k.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),I(this))},k.prototype.render=w,r=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,s=function(e,t){return e.__v.__b-t.__v.__b},T.__r=0,a=/(PointerCapture)$|Capture$/i,c=0,u=A(!1),d=A(!0);var z,$,R,B,F=0,G=[],Q=n,Y=Q.__b,X=Q.__r,Z=Q.diffed,J=Q.__c,V=Q.unmount,K=Q.__;function ee(e,t){Q.__h&&Q.__h($,e,F||t),F=0;var n=$.__H||($.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function te(e){return F=1,function(e,t,n){var o=ee(z++,2);if(o.t=e,!o.__c&&(o.__=[n?n(t):ue(void 0,t),function(e){var t=o.__N?o.__N[0]:o.__[0],n=o.t(t,e);t!==n&&(o.__N=[n,o.__[1]],o.__c.setState({}))}],o.__c=$,!$.__f)){var r=function(e,t,n){if(!o.__c.__H)return!0;var r=o.__c.__H.__.filter(function(e){return!!e.__c});if(r.every(function(e){return!e.__N}))return!i||i.call(this,e,t,n);var l=o.__c.props!==e;return r.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(l=!0)}}),i&&i.call(this,e,t,n)||l};$.__f=!0;var i=$.shouldComponentUpdate,l=$.componentWillUpdate;$.componentWillUpdate=function(e,t,n){if(this.__e){var o=i;i=void 0,r(e,t,n),i=o}l&&l.call(this,e,t,n)},$.shouldComponentUpdate=r}return o.__N||o.__}(ue,e)}function ne(e,t){var n=ee(z++,3);!Q.__s&&ce(n.__H,t)&&(n.__=e,n.u=t,$.__H.__h.push(n))}function oe(e){return F=5,function(e,t){var n=ee(z++,7);return ce(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}(function(){return{current:e}},[])}function re(){for(var e;e=G.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(se),e.__H.__h.forEach(ae),e.__H.__h=[]}catch(t){e.__H.__h=[],Q.__e(t,e.__v)}}Q.__b=function(e){$=null,Y&&Y(e)},Q.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),K&&K(e,t)},Q.__r=function(e){X&&X(e),z=0;var t=($=e.__c).__H;t&&(R===$?(t.__h=[],$.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(se),t.__h.forEach(ae),t.__h=[],z=0)),R=$},Q.diffed=function(e){Z&&Z(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==G.push(t)&&B===Q.requestAnimationFrame||((B=Q.requestAnimationFrame)||le)(re)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),R=$=null},Q.__c=function(e,t){t.some(function(e){try{e.__h.forEach(se),e.__h=e.__h.filter(function(e){return!e.__||ae(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],Q.__e(n,e.__v)}}),J&&J(e,t)},Q.unmount=function(e){V&&V(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{se(e)}catch(n){t=n}}),n.__H=void 0,t&&Q.__e(t,n.__v))};var ie="function"==typeof requestAnimationFrame;function le(e){var t,n=function(){clearTimeout(o),ie&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);ie&&(t=requestAnimationFrame(n))}function se(e){var t=$,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),$=t}function ae(e){var t=$;e.__c=e.__(),$=t}function ce(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function ue(e,t){return"function"==typeof t?t(e):t}function de(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var o in t)if("__source"!==o&&e[o]!==t[o])return!0;return!1}function _e(e,t){this.props=e,this.context=t}(_e.prototype=new k).isPureReactComponent=!0,_e.prototype.shouldComponentUpdate=function(e,t){return de(this.props,e)||de(this.state,t)};var pe=n.__b;n.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),pe&&pe(e)};var fe=n.__e;n.__e=function(e,t,n,o){if(e.then)for(var r,i=t;i=i.__;)if((r=i.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t);fe(e,t,n,o)};var he=n.unmount;function me(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(e){"function"==typeof e.__c&&e.__c()}),e.__c.__H=null),null!=(e=function(e,t){for(var n in t)e[n]=t[n];return e}({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(e){return me(e,t,n)})),e}function ge(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(e){return ge(e,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function ye(){this.__u=0,this.o=null,this.__b=null}function ve(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function be(){this.i=null,this.l=null}n.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),he&&he(e)},(ye.prototype=new k).__c=function(e,t){var n=t.__c,o=this;null==o.o&&(o.o=[]),o.o.push(n);var r=ve(o.__v),i=!1,l=function(){i||(i=!0,n.__R=null,r?r(s):s())};n.__R=l;var s=function(){if(! --o.__u){if(o.state.__a){var e=o.state.__a;o.__v.__k[0]=ge(e,e.__c.__P,e.__c.__O)}var t;for(o.setState({__a:o.__b=null});t=o.o.pop();)t.forceUpdate()}};o.__u++||32&t.__u||o.setState({__a:o.__b=o.__v.__k[0]}),e.then(l,l)},ye.prototype.componentWillUnmount=function(){this.o=[]},ye.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=me(this.__b,n,o.__O=o.__P)}this.__b=null}var r=t.__a&&b(w,null,e.fallback);return r&&(r.__u&=-33),[b(w,null,t.__a?null:e.children),r]};var xe=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(be.prototype=new k).__a=function(e){var t=this,n=ve(t.__v),o=t.l.get(e);return o[0]++,function(r){var i=function(){t.props.revealOrder?(o.push(r),xe(t,e,o)):r()};n?n(i):i()}},be.prototype.render=function(e){this.i=null,this.l=new Map;var t=E(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},be.prototype.componentDidUpdate=be.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){xe(e,n,t)})};var we="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,ke=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ce=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Se=/[A-Z0-9]/g,Ie="undefined"!=typeof document,Te=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(e)};k.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(k.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Ne=n.event;function Pe(){}function Ee(){return this.cancelBubble}function Me(){return this.defaultPrevented}n.event=function(e){return Ne&&(e=Ne(e)),e.persist=Pe,e.isPropagationStopped=Ee,e.isDefaultPrevented=Me,e.nativeEvent=e};var Oe={enumerable:!1,configurable:!0,get:function(){return this.class}},De=n.vnode;n.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,n=e.type,o={},r=-1===n.indexOf("-");for(var i in t){var l=t[i];if(!("value"===i&&"defaultValue"in t&&null==l||Ie&&"children"===i&&"noscript"===n||"class"===i||"className"===i)){var s=i.toLowerCase();"defaultValue"===i&&"value"in t&&null==t.value?i="value":"download"===i&&!0===l?l="":"translate"===s&&"no"===l?l=!1:"o"===s[0]&&"n"===s[1]?"ondoubleclick"===s?i="ondblclick":"onchange"!==s||"input"!==n&&"textarea"!==n||Te(t.type)?"onfocus"===s?i="onfocusin":"onblur"===s?i="onfocusout":Ce.test(i)&&(i=s):s=i="oninput":r&&ke.test(i)?i=i.replace(Se,"-$&").toLowerCase():null===l&&(l=void 0),"oninput"===s&&o[i=s]&&(i="oninputCapture"),o[i]=l}}"select"==n&&o.multiple&&Array.isArray(o.value)&&(o.value=E(t.children).forEach(function(e){e.props.selected=-1!=o.value.indexOf(e.props.value)})),"select"==n&&null!=o.defaultValue&&(o.value=E(t.children).forEach(function(e){e.props.selected=o.multiple?-1!=o.defaultValue.indexOf(e.props.value):o.defaultValue==e.props.value})),t.class&&!t.className?(o.class=t.class,Object.defineProperty(o,"className",Oe)):(t.className&&!t.class||t.class&&t.className)&&(o.class=o.className=t.className),e.props=o}(e),e.$$typeof=we,De&&De(e)};var Ae=n.__r;n.__r=function(e){Ae&&Ae(e),e.__c};var Le=n.diffed;n.diffed=function(e){Le&&Le(e);var t=e.props,n=e.__e;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value)};var We=0;function qe(e,t,o,r,i,l){t||(t={});var s,a,c=t;if("ref"in c)for(a in c={},t)"ref"==a?s=t[a]:c[a]=t[a];var u={type:e,props:c,key:o,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--We,__i:-1,__u:0,__source:i,__self:l};if("function"==typeof e&&(s=e.defaultProps))for(a in s)void 0===c[a]&&(c[a]=s[a]);return n.vnode&&n.vnode(u),u}const He={business:{name:"Stone Quoter",phone:"0424 166 346",email:"leads@quickservicepro.com",agentName:"Matt",avatar:"/matt-profile.png",logo:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSIjMjU2M2ViIi8+Cjwvc3ZnPgo="},services:["Burleigh","Mermaid Waters","Tweed Heads","Surfers Paradise","Broadbeach","Currumbin"],theme:{primary:"rgb(246, 165, 96)",primaryHover:"rgb(236, 145, 76)",secondary:"#f3f4f6",background:"#ffffff",text:"#1f2937",muted:"#6b7280",border:"#e5e7eb"},ga4:{measurementId:"G-XXXXXXXXXX"},apiEndpoint:"https://leadstick-api.attribution.workers.dev",siteId:"",desktopStyle:"bubble",barText:"Get A Quick Quote",barTextMaxLength:30};const Ue=()=>qe("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:qe("path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"})}),je=()=>qe("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:qe("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),ze=()=>qe("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:qe("path",{d:"M18 6L6 18M6 6l12 12"})}),$e=()=>qe("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[qe("polyline",{points:"9,10 4,15 9,20"}),qe("path",{d:"M20,4v7a4,4 0 0,1 -4,4H4"})]}),Re=()=>qe("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:qe("polyline",{points:"20,6 9,17 4,12"})}),Be=({input:e,setInput:t,leadData:n,setLeadData:o,handleSubmit:r,getInputPlaceholder:i,currentStep:l,CONFIG:s,isMobile:a=!1})=>qe("div",{style:{borderTop:"1px solid "+s.theme.border,padding:"16px",paddingBottom:a?"32px":"16px"},children:qe("form",{onSubmit:r,style:{position:"relative",borderRadius:"8px",border:"1px solid "+s.theme.border,backgroundColor:s.theme.background,padding:"4px"},children:[qe("input",{type:"text",name:"website",value:n.website,onChange:e=>o(t=>({...t,website:e.target.value})),style:{position:"absolute",left:"-9999px",width:"1px",height:"1px",overflow:"hidden"},tabIndex:-1,autoComplete:"off","aria-hidden":"true"}),qe("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:i(),maxLength:500,inputMode:"contact"===l&&n.name&&!n.phone?"tel":"text",style:{minHeight:"48px",resize:"none",borderRadius:"8px",backgroundColor:s.theme.background,border:"none",padding:"12px",boxShadow:"none",outline:"none",width:"calc(100% - 8px)",fontSize:a?"16px":"14px",fontFamily:"inherit",boxSizing:"border-box"},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||"service"===l||(e.preventDefault(),r())}}),qe("div",{style:{display:"flex",alignItems:"center",padding:"12px 12px 0",justifyContent:"space-between"},children:qe("button",{type:"submit",disabled:!e.trim(),style:{gap:"6px",backgroundColor:s.theme.primary,color:"white",border:"none",borderRadius:"6px",padding:a?"12px 16px":"8px 12px",fontSize:a?"16px":"14px",display:"flex",alignItems:"center",cursor:e.trim()?"pointer":"not-allowed",opacity:e.trim()?1:.5,pointerEvents:"auto"},children:["Send",qe($e,{})]})})]})}),Fe=({message:e,CONFIG:t})=>{var n,o;return qe("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",marginBottom:"16px",flexDirection:"user"===e.sender?"row-reverse":"row"},children:[qe("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"ai"===e.sender?t.theme.primary:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"600",color:"ai"===e.sender?"white":t.theme.muted,flexShrink:0,overflow:"hidden"},children:"ai"===e.sender?t.business.avatar?qe("img",{src:t.business.avatar,alt:t.business.agentName,style:{width:"100%",height:"100%",objectFit:"cover"},onError:e=>{var n,o;e.currentTarget.style.display="none";const r=(null==(o=null==(n=t.business.agentName)?void 0:n.charAt(0))?void 0:o.toUpperCase())||"A";e.currentTarget.parentElement.innerHTML=`<span style="color: ${t.theme.primary}; font-weight: bold; font-size: 14px;">${r}</span>`}}):qe("span",{style:{color:t.theme.primary,fontWeight:"bold",fontSize:"14px"},children:(null==(o=null==(n=t.business.agentName)?void 0:n.charAt(0))?void 0:o.toUpperCase())||"A"}):"You"}),qe("div",{style:{borderRadius:"8px",padding:"12px",backgroundColor:"user"===e.sender?t.theme.primary:"#f3f4f6",color:"user"===e.sender?"white":t.theme.text,maxWidth:"80%"},children:e.content.startsWith("PHONE_BUTTON")?qe("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[qe("p",{style:{margin:0},children:e.content.includes(":")?e.content.split(":")[1]:"Or call me directly for immediate assistance!"}),qe("button",{onClick:()=>window.open(`tel:${t.business.phone}`,"_self"),style:{backgroundColor:t.theme.primary,color:"white",border:"none",borderRadius:"6px",padding:"8px 12px",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",cursor:"pointer",width:"fit-content",pointerEvents:"auto"},children:[qe(je,{}),t.business.phone]})]}):qe("div",{style:{whiteSpace:"pre-line"},children:e.content})})]})},Ge=class e{constructor(){p(this,"sessionId"),this.sessionId=this.generateSessionId()}static getInstance(){return e.instance||(e.instance=new e),e.instance}generateSessionId(){return"session_"+Math.random().toString(36).substr(2,9)+"_"+Date.now().toString(36)}getUrlParam(e){return new URLSearchParams(window.location.search).get(e)||""}getSource(){const e=this.getUrlParam("utm_source");if(e)return e;const t=document.referrer;if(!t)return"direct";try{const e=new URL(t).hostname.toLowerCase();return e===window.location.hostname.toLowerCase()?"internal":e.includes("google")?"google":e.includes("facebook")||e.includes("fb.")?"facebook":e.includes("instagram")?"instagram":e.includes("linkedin")?"linkedin":e.includes("twitter")||e.includes("t.co")?"twitter":e.includes("youtube")?"youtube":e.includes("bing")?"bing":e.includes("yahoo")?"yahoo":e}catch{return"unknown"}}getMedium(){const e=this.getUrlParam("utm_medium");if(e)return e;if(this.getUrlParam("gclid"))return"cpc";if(this.getUrlParam("fbclid"))return"social";if(this.getUrlParam("msclkid"))return"cpc";if(this.getUrlParam("ttclid"))return"social";const t=this.getSource(),n=document.referrer;return"direct"===t?"direct":"internal"===t?"internal":["google","bing","yahoo"].includes(t)?"organic":["facebook","instagram","linkedin","twitter","youtube"].includes(t)?"social":n?"referral":"unknown"}captureCurrentSession(){return{source:this.getSource(),medium:this.getMedium(),campaign:this.getUrlParam("utm_campaign"),content:this.getUrlParam("utm_content"),term:this.getUrlParam("utm_term"),gclid:this.getUrlParam("gclid"),fbclid:this.getUrlParam("fbclid"),msclkid:this.getUrlParam("msclkid"),ttclid:this.getUrlParam("ttclid"),landingPage:window.location.href,referrer:document.referrer,timestamp:(new Date).toISOString()}}setCookie(e,t,n){const o=new Date(Date.now()+24*n*60*60*1e3).toUTCString();document.cookie=`${e}=${encodeURIComponent(t)}; expires=${o}; path=/; SameSite=Lax`}getCookie(e){const t=e+"=",n=document.cookie.split(";");for(let o=0;o<n.length;o++){let e=n[o];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return decodeURIComponent(e.substring(t.length,e.length))}return null}trackAttribution(){const e=this.captureCurrentSession();this.getCookie("leadstick_first_touch")||this.setCookie("leadstick_first_touch",JSON.stringify(e),90),this.setCookie("leadstick_last_touch",JSON.stringify(e),90),this.setCookie("leadstick_session_id",this.sessionId,1)}getAttributionData(){const e=this.getCookie("leadstick_first_touch"),t=this.getCookie("leadstick_last_touch");let n,o;try{n=e?JSON.parse(e):this.captureCurrentSession(),o=t?JSON.parse(t):this.captureCurrentSession()}catch{const e=this.captureCurrentSession();n=e,o=e}return{firstTouch:n,lastTouch:o,sessionId:this.sessionId}}};p(Ge,"instance");let Qe=Ge;const Ye=[{step:1,title:"Location",description:"Where are you?",chatStep:"location"},{step:2,title:"Project",description:"Tell us about it",chatStep:"service"},{step:3,title:"Contact",description:"Your details",chatStep:"contact"}];function Xe(e){const t=(e.flow||[]).filter(e=>"signpost"===e.type);return 0===t.length?Ye:t.map((e,t)=>({step:t+1,title:e.heading||e.title||`Step ${t+1}`,description:e.subheading||e.description||"",chatStep:0===t?"location":1===t?"service":"contact",signpostId:e.id}))}function Ze(e){return e.flow?e.flow.filter(e=>"question"===e.type):[]}function Je(e,t){const n=function(e){return e.flow?e.flow.filter(e=>"question"===e.type).map(e=>e.question):[]}(e);return n[t]||null}function Ve({CONFIG:e}){const[t,n]=te(!1),[o,r]=te(!1),[i,l]=te("location"),s=oe(null),a=oe(null),[c,u]=te({location:"",service:"",name:"",firstName:"",lastName:"",phone:"",email:"",finalMessage:"",website:"",formOpenTime:Date.now()}),d=Qe.getInstance(),_=t=>t.replace(/\[Agent Name\]/g,e.business.agentName),[p,f]=te(()=>{var t;const n=(null==(t=e.messages)?void 0:t.welcome)?_(e.messages.welcome):`Hi, ${e.business.agentName} here. Let me know a little about your project. Your message comes straight to my phone and I'll send your quote ASAP`,o=(e.flow||[]).filter(e=>"question"===e.type);return[{id:1,content:n,sender:"ai"},{id:2,content:o.length>0?o[0].question:"ðŸ“ First, what's your location/suburb?",sender:"ai"}]}),[h,m]=te(""),g=()=>n(!t);ne(()=>{const e=()=>{r(window.innerWidth<768)};return e(),window.addEventListener("resize",e),d.trackAttribution(),()=>window.removeEventListener("resize",e)},[]),ne(()=>{var n;if(t){l("location"),u({location:"",service:"",name:"",firstName:"",lastName:"",phone:"",email:"",finalMessage:"",website:"",formOpenTime:Date.now()});const t=(null==(n=e.messages)?void 0:n.welcome)?_(e.messages.welcome):`Hi, ${e.business.agentName} here. Let me know a little about your project. Your message comes straight to my phone and I'll send your quote ASAP`,o=(e.flow||[]).filter(e=>"question"===e.type),r=o.length>0?o[0].question:"ðŸ“ First, what's your location/suburb?";f([{id:1,content:t,sender:"ai"},{id:2,content:r,sender:"ai"}]),m("")}},[t]);const y=(e,t)=>{f(n=>[...n,{id:n.length+1,content:e,sender:t}])},v=t=>{var n,o;if(null==t||t.preventDefault(),!h.trim())return;const r=h.trim();let s="general";if("contact"===i){const t=Ze(e),n=t.filter(e=>e.questionType&&["firstName","lastName","name","phone","email"].includes(e.questionType));let o=0;if(c.name&&o++,c.firstName&&o++,c.lastName&&o++,c.phone&&o++,c.email&&o++,o<n.length){const e=n[o];if(e&&e.questionType)s=e.questionType;else{const e=t.slice(2)[o];if(e&&e.question){const t=e.question.toLowerCase();s=t.includes("first name")||t.includes("firstname")?"firstName":t.includes("last name")||t.includes("lastname")?"lastName":t.includes("name")?"name":t.includes("phone")||t.includes("number")||e.question.includes("ðŸ“±")?"phone":t.includes("email")||e.question.includes("âœ‰ï¸")?"email":"name"}}}}const a=((e,t)=>{const n=e.trim();if(!n)return{valid:!1,error:"This field is required"};if(n.length>500)return{valid:!1,error:"Input too long (max 500 characters)"};if("email"===t&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n))return{valid:!1,error:"Please enter a valid email address"};if("phone"===t&&(!/^[\d\s\-\+\(\)\.]+$/.test(n)||n.replace(/\D/g,"").length<10))return{valid:!1,error:"Please enter a valid phone number"};return"name"===t&&n.length<2?{valid:!1,error:"Please enter your full name"}:"firstName"===t&&n.length<1?{valid:!1,error:"Please enter your first name"}:"lastName"===t&&n.length<1?{valid:!1,error:"Please enter your last name"}:{valid:!0}})(r,s);if(a.valid)switch(y(r,"user"),m(""),i){case"location":u(e=>({...e,location:r}));const t=Je(e,1);t&&y(t,"ai"),l("service");break;case"service":u(e=>({...e,service:r}));const i=Je(e,2);i&&y(i,"ai"),l("contact");break;case"contact":"firstName"===s?u(e=>({...e,firstName:r})):"lastName"===s?u(e=>({...e,lastName:r})):"name"===s?u(e=>({...e,name:r})):"phone"===s?u(e=>({...e,phone:r})):"email"===s&&u(e=>({...e,email:r}));const a=Ze(e).filter(e=>e.questionType&&["firstName","lastName","name","phone","email"].includes(e.questionType));let d=0;const p={...c};if("firstName"===s&&(p.firstName=r),"lastName"===s&&(p.lastName=r),"name"===s&&(p.name=r),"phone"===s&&(p.phone=r),"email"===s&&(p.email=r),p.name&&d++,p.firstName&&d++,p.lastName&&d++,p.phone&&d++,p.email&&d++,d<a.length){const e=a[d];e&&e.question&&y(e.question,"ai")}else{const t=(null==(n=e.messages)?void 0:n.completion)?_(e.messages.completion):"Perfect! I've got all your details. I'll get back to you ASAP.";y(t,"ai");const r=Ze(e);let i=[];if(c.location){const e=r.find(e=>e.question&&(e.question.toLowerCase().includes("location")||e.question.toLowerCase().includes("suburb")||e.question.includes("ðŸ“"))),t=e?e.question.replace(/[?!.]/g,""):"Location";i.push(`${t}: ${c.location}`)}if(c.service){const e=r.find(e=>e.question&&(e.question.toLowerCase().includes("project")||e.question.toLowerCase().includes("service")||e.question.toLowerCase().includes("work"))),t=e?e.question.replace(/[?!.]/g,""):"Project";i.push(`${t}: ${c.service}`)}if(p.name)i.push(`Name: ${p.name}`);else if(p.firstName||p.lastName){const e=(p.firstName+" "+p.lastName).trim();i.push(`Name: ${e}`)}if(p.phone){const e=r.find(e=>e.question&&(e.question.toLowerCase().includes("phone")||e.question.toLowerCase().includes("number")||e.question.includes("ðŸ“±"))),t=e?e.question.replace(/[?!.]/g,""):"Phone";i.push(`${t}: ${p.phone}`)}if(p.email){const e=r.find(e=>e.question&&(e.question.toLowerCase().includes("email")||e.question.includes("âœ‰ï¸"))),t=e?e.question.replace(/[?!.]/g,""):"Email";i.push(`${t}: ${p.email}`)}const s=i.length>0?`ðŸ“‹ Summary:\n${i.join("\n")}`:"ðŸ“‹ Summary: All details collected";y(s,"ai");const a=(null==(o=e.messages)?void 0:o.phoneButton)?_(e.messages.phoneButton):"Or call me directly for immediate assistance!";y(`PHONE_BUTTON:${a}`,"ai"),l("complete")}}else y(a.error,"ai")},b=()=>{const t=Ze(e);switch(i){case"location":return t[0]&&t[0].placeholder?t[0].placeholder:"e.g. Burleigh, Mermaid Waters, Tweed Heads...";case"service":return t[1]&&t[1].placeholder?t[1].placeholder:"Tell me about your stone project...";case"contact":const e=t.filter(e=>e.questionType&&["firstName","lastName","name","phone","email"].includes(e.questionType));let n=0;if(c.name&&n++,c.firstName&&n++,c.lastName&&n++,c.phone&&n++,c.email&&n++,n<e.length){const o=e[n];if(o){if(o.placeholder)return o.placeholder;if(o.questionType)switch(o.questionType){case"firstName":return"Enter your first name";case"lastName":return"Enter your last name";case"name":return"Enter your full name";case"phone":return"Enter your phone number";case"email":return"Enter your email address";default:return"Type your response..."}}else{const e=t.slice(2)[n];if(e){if(e.placeholder)return e.placeholder;if(e.question){const t=e.question.toLowerCase();if(t.includes("first name")||t.includes("firstname"))return"Enter your first name";if(t.includes("last name")||t.includes("lastname"))return"Enter your last name";if(t.includes("name"))return"Enter your full name";if(t.includes("phone")||t.includes("number")||e.question.includes("ðŸ“±"))return"Enter your phone number";if(t.includes("email")||e.question.includes("âœ‰ï¸"))return"Enter your email address"}}}}return"Type your response...";default:return"Type your message..."}},x=()=>{const t=Xe(e);if(!e.signposts||0===e.signposts.length){return{location:1,service:2,contact:3,complete:3}[i]}if("complete"===i)return t.length;const n=(()=>{if(!e.flow||!e.signposts)return{};const t={};return e.flow.forEach(e=>{const n=e.signpostId||"ungrouped";t[n]||(t[n]=[]),t[n].push(e)}),t})(),o=new Set;c.location&&o.add("location"),c.service&&o.add("service"),c.name&&o.add("name"),c.phone&&o.add("phone"),c.email&&o.add("email");for(let r=0;r<e.signposts.length;r++){if(!(n[e.signposts[r].id]||[]).every(e=>o.has(e.type)||o.has(e.id)))return r+1}return t.length},k=t=>{if(Xe(e),!e.signposts||0===e.signposts.length)switch(t){case 1:return!!c.location;case 2:return!!c.service;case 3:return"complete"===i;default:return!1}if("complete"===i)return!0;return t<x()};ne(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight),a.current&&(a.current.scrollTop=a.current.scrollHeight)},[p]),ne(()=>{console.log("[Widget] useEffect triggered - currentStep:",i),console.log("[Widget] leadData:",c),"complete"===i?(console.log("[Widget] Reached complete step, calling submitLead()"),(async()=>{console.log("[Widget] submitLead() called"),console.log("[Widget] Full leadData:",c);try{if(c.website&&""!==c.website.trim())return void console.warn("[Widget] Honeypot field filled - likely spam");const t=Date.now()-(c.formOpenTime||Date.now());if(console.log("[Widget] Time elapsed:",t),t<5e3)return console.warn("[Widget] Form submitted too quickly - likely spam"),void y("Please take your time to fill out the form properly.","ai");const n=d.getAttributionData();console.log("[Widget] Attribution data:",n),"undefined"!=typeof gtag&&(console.log("[Widget] Sending GA4 event"),gtag("event","leadstick_completed",{business_name:e.business.name,service_selected:c.service,location:c.location,lead_source:"leadstick-widget",first_touch_source:n.firstTouch.source,first_touch_medium:n.firstTouch.medium,last_touch_source:n.lastTouch.source,last_touch_medium:n.lastTouch.medium,session_id:n.sessionId,value:100}));const o={...c,attribution:n,business:e.business.name,timestamp:(new Date).toISOString(),source:"leadstick-widget",siteId:e.siteId,submissionTime:t};console.log("[Widget] About to submit to API:",e.apiEndpoint),console.log("[Widget] Request data:",o);const r=await fetch(e.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(console.log("[Widget] API response status:",r.status),console.log("[Widget] API response:",r),!r.ok){console.error("[Widget] API request failed with status:",r.status);const e=await r.json().catch(()=>null);if(console.error("[Widget] Error data:",e),429===r.status){const t=(null==e?void 0:e.retryAfter)||3600,n=Math.ceil(t/60);return y(t<60?`Please wait ${t} seconds before submitting again.`:n<60?`You've reached the submission limit. Please try again in ${n} minute${n>1?"s":""}.`:"You've reached the submission limit. Please try again later or call us directly.","ai"),void y("PHONE_BUTTON","ai")}throw new Error((null==e?void 0:e.message)||"Failed to submit lead")}const i=await r.json();console.log("[Widget] API response data:",i),console.log("[Widget] Lead submission completed successfully!")}catch(t){console.error("[Widget] Error submitting lead:",t)}})()):console.log("[Widget] Not at complete step yet, currentStep:",i)},[i]);const C={container:{display:"flex",width:"100%",alignItems:"center"},item:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,position:"relative",gap:"4px"},indicator:{display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",borderRadius:"50%",fontSize:"12px",fontWeight:"500",backgroundColor:"#f3f4f6",color:"#6b7280",transition:"all 0.2s"},indicatorActive:{backgroundColor:e.theme.primary,color:"white"},indicatorCompleted:{backgroundColor:e.theme.primary,color:"white"},title:{fontSize:"12px",fontWeight:"500",textAlign:"center"},description:{fontSize:"12px",color:e.theme.muted,textAlign:"center"},separator:{position:"absolute",top:"12px",left:"calc(50% + 12px + 2px)",right:"calc(-50% + 12px + 2px)",height:"2px",backgroundColor:"#f3f4f6"},separatorCompleted:{backgroundColor:e.theme.primary}};return qe(w,{children:[!t&&qe("div",{style:{position:"fixed",bottom:0,left:0,right:0,zIndex:50,display:o?"block":"none"},children:qe("button",{onClick:g,style:{width:"100%",height:"56px",border:"none",borderRadius:0,backgroundColor:e.theme.primary,color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"18px",fontWeight:"500",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",borderTop:"1px solid #e5e7eb",cursor:"pointer",pointerEvents:"auto"},onMouseOver:t=>t.currentTarget.style.backgroundColor=e.theme.primaryHover,onMouseOut:t=>t.currentTarget.style.backgroundColor=e.theme.primary,children:[qe(Ue,{}),"Get Quick Quote"]})}),qe("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:50,display:o?"none":"block"},children:[qe("div",{style:{display:"flex",flexDirection:"column",backgroundColor:e.theme.background,border:"1px solid "+e.theme.border,borderRadius:"8px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",overflow:"hidden",transition:"all 0.25s ease-out",position:"absolute",width:"90vw",height:"80vh",maxWidth:"512px",maxHeight:"700px",bottom:"calc(100% + 10px)",right:0,pointerEvents:"auto",opacity:t?1:0,visibility:t?"visible":"hidden",transform:t?"scale(1) translateY(0)":"scale(1) translateY(20px)"},children:[qe("div",{style:{display:"flex",flexDirection:"column",textAlign:"center",justifyContent:"center",padding:"16px",borderBottom:"1px solid "+e.theme.border},children:[qe("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"8px",marginTop:"16px"},children:qe("h1",{style:{fontSize:"20px",fontWeight:"600",margin:0,color:e.theme.text},children:"Get A Quick Quote"})}),qe("p",{style:{fontSize:"14px",color:e.theme.muted,marginBottom:"12px",margin:0},children:"Quick 3-step process to get your quote"}),qe("div",{style:{width:"100%",marginBottom:"16px"},children:qe("div",{style:C.container,children:Xe(e).map(({step:t,title:n,description:r},i)=>{const l=x()===t,s=k(t),a=i===Xe(e).length-1;return qe("div",{style:C.item,children:[qe("div",{style:{...C.indicator,...l?C.indicatorActive:{},...s?C.indicatorCompleted:{}},children:s?qe(Re,{}):t}),qe("div",{style:C.title,children:n}),qe("div",{style:{...C.description,display:o?"none":"block"},children:r}),!a&&qe("div",{style:{...C.separator,...s?C.separatorCompleted:{}}})]},t)})})})]}),qe("div",{ref:s,style:{flexGrow:1,overflowY:"auto",padding:"16px"},children:p.map(t=>qe(Fe,{message:t,CONFIG:e},t.id))}),"complete"!==i&&qe(Be,{input:h,setInput:m,leadData:c,setLeadData:u,handleSubmit:v,getInputPlaceholder:b,currentStep:i,CONFIG:e,isMobile:!1}),qe("div",{style:{padding:"4px 16px 8px",textAlign:"right",fontSize:"10px",color:"#9ca3af",pointerEvents:"auto"},children:qe("a",{href:`https://postclick.io?utm_source=leadstick_widget&utm_medium=powered_by&utm_campaign=widget_footer&utm_content=${encodeURIComponent(window.location.hostname)}`,target:"_blank",rel:"noopener noreferrer",style:{color:"#9ca3af",textDecoration:"none",transition:"color 0.2s",display:"inline-flex",alignItems:"center",gap:"4px"},onMouseOver:t=>t.currentTarget.style.color=e.theme.primary,onMouseOut:e=>e.currentTarget.style.color="#9ca3af",children:["Powered by ",qe("span",{style:{fontWeight:"500"},children:"Postclick"})]})}),qe("button",{onClick:g,style:{position:"absolute",top:"8px",right:"8px",backgroundColor:"transparent",border:"none",cursor:"pointer",padding:"4px",display:o?"block":"none",color:e.theme.text,borderRadius:"4px",transition:"background-color 0.2s, color 0.2s"},onMouseOver:t=>{const n=t.currentTarget;n.style.backgroundColor=e.theme.primary,n.style.color="white"},onMouseOut:t=>{const n=t.currentTarget;n.style.backgroundColor="transparent",n.style.color=e.theme.text},children:qe(ze,{})})]}),t||"bar"!==e.desktopStyle?qe("button",{onClick:g,style:{width:"56px",height:"56px",borderRadius:"50%",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s",backgroundColor:e.theme.primary,color:"white",border:"none",cursor:"pointer",pointerEvents:"auto"},onMouseOver:t=>{t.currentTarget.style.boxShadow="0 20px 25px -5px rgba(0, 0, 0, 0.3)",t.currentTarget.style.backgroundColor=e.theme.primaryHover},onMouseOut:t=>{t.currentTarget.style.boxShadow="0 10px 15px -3px rgba(0, 0, 0, 0.1)",t.currentTarget.style.backgroundColor=e.theme.primary},children:qe(t?ze:Ue,{})}):qe("button",{onClick:g,style:{backgroundColor:e.theme.primary,color:"white",padding:"12px 24px",borderRadius:"24px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",cursor:"pointer",transition:"all 0.3s ease",fontSize:"16px",fontWeight:"500",maxWidth:"300px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",border:"none",pointerEvents:"auto"},onMouseOver:t=>{t.currentTarget.style.boxShadow="0 6px 20px rgba(0, 0, 0, 0.2)",t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.backgroundColor=e.theme.primaryHover},onMouseOut:t=>{t.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)",t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.backgroundColor=e.theme.primary},children:e.barText.substring(0,e.barTextMaxLength)})]}),t&&o&&qe("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999999,backgroundColor:e.theme.background,pointerEvents:"auto"},children:qe("div",{style:{display:"flex",flexDirection:"column",backgroundColor:e.theme.background,height:"100%",overflow:"hidden"},children:[qe("div",{style:{display:"flex",flexDirection:"column",textAlign:"center",justifyContent:"center",padding:"16px",borderBottom:"1px solid "+e.theme.border,position:"relative"},children:[qe("button",{onClick:()=>{"undefined"!=typeof gtag&&gtag("event","leadstick_phone_tapped",{business_name:e.business.name,phone_number:e.business.phone,source:"mobile_chat_header",page_url:window.location.href,timestamp:(new Date).toISOString()}),window.open(`tel:${e.business.phone}`,"_self")},style:{position:"absolute",top:"12px",left:"12px",backgroundColor:"transparent",border:"1px solid "+e.theme.border,borderRadius:"6px",padding:"6px 10px",display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",fontWeight:"500",color:e.theme.primary,cursor:"pointer",pointerEvents:"auto",transition:"all 0.2s"},onMouseOver:t=>{t.currentTarget.style.backgroundColor=e.theme.primary,t.currentTarget.style.color="white"},onMouseOut:t=>{t.currentTarget.style.backgroundColor="transparent",t.currentTarget.style.color=e.theme.primary},children:[qe(je,{}),qe("span",{children:"Tap To Call"})]}),qe("button",{onClick:g,style:{position:"absolute",top:"12px",right:"12px",backgroundColor:"transparent",border:"none",cursor:"pointer",padding:"6px",pointerEvents:"auto",color:e.theme.text,borderRadius:"4px",transition:"background-color 0.2s, color 0.2s"},onMouseOver:t=>{const n=t.currentTarget;n.style.backgroundColor=e.theme.primary,n.style.color="white"},onMouseOut:t=>{const n=t.currentTarget;n.style.backgroundColor="transparent",n.style.color=e.theme.text},children:qe(ze,{})}),qe("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"8px",marginTop:"32px"},children:qe("h1",{style:{fontSize:"20px",fontWeight:"600",margin:0,color:e.theme.text},children:"Get A Quick Quote"})}),qe("p",{style:{fontSize:"14px",color:e.theme.muted,marginBottom:"12px",margin:0},children:"Quick 3-step process to get your quote"}),qe("div",{style:{width:"100%",marginBottom:"16px"},children:qe("div",{style:C.container,children:Xe(e).map(({step:t,title:n,description:o},r)=>{const i=x()===t,l=k(t),s=r===Xe(e).length-1;return qe("div",{style:C.item,children:[qe("div",{style:{...C.indicator,...i?C.indicatorActive:{},...l?C.indicatorCompleted:{}},children:l?qe(Re,{}):t}),qe("div",{style:C.title,children:n}),!s&&qe("div",{style:{...C.separator,...l?C.separatorCompleted:{}}})]},t)})})})]}),qe("div",{ref:a,style:{flexGrow:1,overflowY:"auto",padding:"16px"},children:p.map(t=>qe(Fe,{message:t,CONFIG:e},t.id))}),"complete"!==i&&qe(Be,{input:h,setInput:m,leadData:c,setLeadData:u,handleSubmit:v,getInputPlaceholder:b,currentStep:i,CONFIG:e,isMobile:!0}),qe("div",{style:{position:"absolute",bottom:"4px",right:"8px",fontSize:"10px",color:"#9ca3af",pointerEvents:"auto",background:"rgba(255, 255, 255, 0.8)",padding:"2px 4px",borderRadius:"3px"},children:qe("a",{href:`https://postclick.io?utm_source=leadstick_widget&utm_medium=powered_by&utm_campaign=widget_footer&utm_content=${encodeURIComponent(window.location.hostname)}`,target:"_blank",rel:"noopener noreferrer",style:{color:"#9ca3af",textDecoration:"none",transition:"color 0.2s",display:"flex",alignItems:"center",gap:"4px"},onMouseOver:t=>t.currentTarget.style.color=e.theme.primary,onMouseOut:e=>e.currentTarget.style.color="#9ca3af",children:["Powered by ",qe("span",{style:{fontWeight:"500"},children:"Postclick"})]})})]})})]})}async function Ke(e){var o,r;let i=He;const l=window.leadstickConfig,s=(null==l?void 0:l.apiUrl)||He.apiEndpoint;if(null==e?void 0:e.siteId)try{const t=await fetch(`${s}/api/config/${e.siteId}`);if(t.ok){const n=await t.json(),l={...He.theme,...n.theme||{}};(null==(o=n.theme)?void 0:o.primary)&&!(null==(r=n.theme)?void 0:r.primaryHover)&&(l.primaryHover=function(e,t){e=e.replace("#","");const n=parseInt(e.substring(0,2),16),o=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16),i=Math.max(0,Math.floor(n*(1-t))),l=Math.max(0,Math.floor(o*(1-t))),s=Math.max(0,Math.floor(r*(1-t))),a=e=>e.toString(16).padStart(2,"0");return`#${a(i)}${a(l)}${a(s)}`}(n.theme.primary,.1)),i={...He,...n,business:{...He.business,...n.business||{}},theme:l,apiEndpoint:s,siteId:e.siteId}}else console.warn(`LeadStick: Could not load config for siteId '${e.siteId}', using default config`)}catch(v){console.warn("LeadStick: Failed to fetch configuration, using default config:",v)}"undefined"!=typeof gtag&&gtag("event","leadstick_started",{business_name:i.business.name,widget_version:"1.0.0",page_url:window.location.href,device_type:window.innerWidth<768?"mobile":"desktop",site_id:i.siteId||"default"});const a=document.getElementById("leadstick-root");a&&a.remove();const c=document.createElement("div");c.id="leadstick-root",c.style.position="fixed",c.style.zIndex="999999",c.style.pointerEvents="none",c.style.top="0",c.style.left="0",c.style.width="100%",c.style.height="100%";const u=c.attachShadow({mode:"open"}),d=document.createElement("div");d.style.position="fixed",d.style.top="0",d.style.left="0",d.style.width="100%",d.style.height="100%",d.style.pointerEvents="none",d.style.zIndex="999999";const _=document.createElement("style");var p,h,m,g,y;_.textContent="\n    /* CSS Reset for complete isolation */\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n    }\n    \n    /* Prevent host site styles from leaking in */\n    :host {\n      all: initial;\n      display: block;\n    }\n    \n    /* Base typography reset */\n    h1, h2, h3, h4, h5, h6 {\n      font-weight: 600;\n      line-height: 1.2;\n    }\n    \n    p {\n      line-height: 1.5;\n    }\n    \n    button {\n      font-family: inherit;\n      font-size: inherit;\n      line-height: inherit;\n      color: inherit;\n      background: none;\n      border: none;\n      padding: 0;\n      margin: 0;\n      cursor: pointer;\n    }\n    \n    input, textarea {\n      font-family: inherit;\n      font-size: inherit;\n      line-height: inherit;\n      color: inherit;\n      background: none;\n      border: none;\n      padding: 0;\n      margin: 0;\n      outline: none;\n    }\n    \n    a {\n      color: inherit;\n      text-decoration: none;\n    }\n    \n    /* Ensure proper text rendering */\n    html, body {\n      text-rendering: optimizeLegibility;\n      -webkit-text-size-adjust: 100%;\n      -moz-text-size-adjust: 100%;\n      text-size-adjust: 100%;\n    }\n  ",u.appendChild(_),u.appendChild(d),c.addEventListener("click",e=>{e.target===c&&e.stopPropagation()}),document.body.appendChild(c),p=b(Ve,{CONFIG:i}),(h=d)==document&&(h=document.documentElement),n.__&&n.__(p,h),m=h.__k,g=[],y=[],L(h,p=h.__k=b(w,null,[p]),m||f,f,h.namespaceURI,m?null:h.firstChild?t.call(h.childNodes):null,g,m?m.__e:h.firstChild,!1,y),W(g,p,y)}if("undefined"!=typeof window){window.LeadStick={init:Ke};const e=window.leadstickConfig;e&&e.siteId?"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>Ke({siteId:e.siteId})):Ke({siteId:e.siteId}):"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>Ke()):Ke()}e.default=Ve,e.initLeadStick=Ke,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
